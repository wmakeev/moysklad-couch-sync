const promisify = require('es6-promisify')

const nano = require('nano')(process.env.COUCHDB_HOST)
const moyskladDb = nano.db.use('moysklad')

const methods = ['fetchRevs', 'insert', 'bulk']

module.exports = methods.reduce((res, method) => {
  res[method] = promisify(moyskladDb[method], moyskladDb)
  return res
}, {})
